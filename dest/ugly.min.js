var app=angular.module("ChatApp",["ngRoute"]),socket=io.connect("http://localhost:8080");angular.module("ChatApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/Login.html",controller:"LoginCtrl"}).when("/Home",{templateUrl:"views/Home.html",controller:"HomeCtrl"}).otherwise({redirectTo:"/"})}]),app.factory("Globals",[function(){var a,b="";return{setUserName:function(a){b=a},getUserName:function(){return b},getSocket:function(){return void 0===a&&(a=io.connect("http://localhost:8080")),a}}}]),app.controller("LoginCtrl",["$scope","$location","Globals",function(a,b,c){console.log(c),a.userName=c.getUserName(),a.errorMessage="",a.connect=function(){socket.emit("adduser",a.userName,function(d){d?""===a.userName?a.errorMessage="Please select a user name:":(console.log("Name available"),a.errorMessage="",c.setUserName(a.userName),b.path("/Home")):(console.log("Username taken error"),a.errorMessage=""===a.userName?"Please select a user name":"That user name is already taken!"),a.$apply()})}}]),app.controller("HomeCtrl",["$scope","$location","Globals","$routeParams",function(a,b,c){function d(){socket.emit("rooms")}console.log(c),a.chatRooms=[],a.userName=c.getUserName(),d(),socket.on("roomlist",function(b){a.chatRooms=b,console.log(a.chatRooms),a.$apply()})}]);