angular.module("ChatApp",["ngRoute"]),angular.module("ChatApp").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/Login.html",controller:"LoginCtrl"}).when("/Home",{templateUrl:"views/Home.html",controller:"HomeCtrl"}).when("/ChatRoom/:RoomName",{templateUrl:"views/ChatRoom.html",controller:"ChatCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("ChatApp").factory("Globals",[function(){var a,b="";return{setUserName:function(a){b=a},getUserName:function(){return b},getSocket:function(){return void 0===a&&(a=io.connect("http://localhost:8080")),a}}}]),angular.module("ChatApp").controller("LoginCtrl",["$scope","$location","Globals",function(a,b,c){a.userName=c.getUserName(),a.errorMessage="";var d=c.getSocket();a.connect=function(){d.emit("adduser",a.userName,function(d){d?""===a.userName?(a.errorMessage="Please select a user name:",a.$apply()):(a.errorMessage="",c.setUserName(a.userName),b.path("/Home"),a.$apply()):""===a.userName?(a.errorMessage="Please select a user name",a.$apply()):(a.errorMessage="That user name is already taken!",a.$apply())})}}]),angular.module("ChatApp").controller("HomeCtrl",["$scope","$location","Globals","$routeParams",function(a,b,c){function d(){e.emit("rooms")}a.chatRooms=[],a.userName=c.getUserName();var e=c.getSocket();d(),e.on("roomlist",function(b){a.chatRooms=b,console.log(a.chatRooms),a.$apply()})}]),angular.module("ChatApp").controller("ChatCtrl",["$scope","$location","$routeParams","Globals",function(){}]);